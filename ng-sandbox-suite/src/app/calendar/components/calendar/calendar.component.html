<div class="calendar-container flex-wrap gap-4">
  <div class="calendar px-4">
    <div class="calendar-headline">
      <div class="calendar-headline-month">
        {{ firstDayOfActiveMonth().monthShort }},
        {{ firstDayOfActiveMonth().year }}
      </div>
      <div class="calendar-headline-controls">
        <div class="calendar-headline-control" (click)="goToPreviousMonth()">
          <
        </div>
        <div
          class="calendar-headline-control calendar-headline-control-today"
          (click)="goToToday()"
        >
          Today
        </div>
        <div class="calendar-headline-control" (click)="goToNextMonth()">></div>
      </div>
    </div>
    <div class="calendar-weeks-grid">
      @for (weekday of weekDays(); track $index) {
      <div class="calendar-weeks-grid-cell">
        {{ weekday }}
      </div>
      }
    </div>
    <div class="calendar-grid grid grid-cols-7">
      @for (dayOfMonth of daysOfMonth(); track $index) {
      <div
        [ngClass]="{  
          'bg-blue-500':
            activeDay()?.toISODate() === dayOfMonth.toISODate(),
          'calendar-grid-cell-inactive':
            firstDayOfActiveMonth().month !== dayOfMonth.month,
            'calendar-grid-cell-today': dayOfMonth.toISODate() === today().toISODate(),
        }"
        class="flex flex-col calendar-grid-cell px-4 py-2 items-center justify-start cursor-pointer rounded-lg hover:bg-blue-500"
        (click)="setActiveDay(dayOfMonth)"
      >
        <div>
          {{ dayOfMonth.day }}
        </div>
        @if (dayOfWeekHabitCount(dayOfMonth) > 0) {
        <div class="relative text-xs bg-teal-500 rounded-xl">
          {{ dayOfWeekHabitCount(dayOfMonth) }}
        </div>
        }
      </div>
      }
    </div>
  </div>
  <div class="mx-2">
    <div class="mb-8 font-semibold">
      @if (activeDay(); as activeDay) {
      <div>{{ activeDay.toLocaleString(DATE_MED) }}</div>
      } @else {
      <div>No day selected</div>
      }
    </div>
    <div>
      @if (activeDay() && activeDayHabits().length === 0) {
      <div>No habits for this day</div>
      } @else if (activeDay()) { @for (habit of activeDayHabits(); track $index)
      {
      <div>{{ habit }}</div>
      } }
    </div>
  </div>
</div>
